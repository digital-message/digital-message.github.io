<style> 
body{padding:0;margin:0}
#canvas{position:absolute;width:100%;height:35%;top:0;border-bottom:1px solid #CCC;}
#output{position:absolute;width:100%;height:40%;top:40%;overflow:scroll;border-bottom:1px solid #CCC;}
#input{position:absolute;width:100%;height:20%;bottom:0;}
</style>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
<body>
<img src="/logo.png" width="0" height="0" style="position: absolute; opacity: 0;" />
<div id="canvas">
<center>
  <svg width="100%" height="100%" viewbox="0 0 300 300">
    <g transform="translate(150, 150)">
      <ellipse cx="0" cy="0" rx="120" ry="120" fill="white" stroke="brown" />
        <line x1="0" y1="0" x2="40" y2="0" stroke="green" stroke-width="6">
          <animateTransform id="h" attributeName="transform" type="rotate" from="-90" to="270" dur="43200" begin="0" repeatCount="indefinite">
        </line>
        <line x1="0" y1="0" x2="60" y2="0" stroke="blue" stroke-width="4">
          <animateTransform  id="m" attributeName="transform" type="rotate" from="-90" to="270" dur="3600s" begin="0" repeatCount="indefinite">
        </line>
        <line x1="0" y1="0" x2="90" y2="0" stroke="red" stroke-width="2">
          <animateTransform  id="s" attributeName="transform" type="rotate" from="-90" to="270" dur="60s" begin="0" repeatCount="indefinite">
        </line>
        <g transform="rotate(30)">
          <text x="-0.5em" y="-100">I</text>
        </g>
        <g transform="rotate(60)">
          <text x="-0.5em" y="-100">II</text>
        </g>
        <g transform="rotate(90)">
          <text x="-0.5em" y="-100">III</text>
        </g>
        <g transform="rotate(120)">
          <text x="-0.5em" y="-100">IIII</text>
        </g>
        <g transform="rotate(150)">
          <text x="-0.5em" y="-100">V</text>
        </g>
        <g transform="rotate(180)">
          <text x="-0.5em" y="-100">VI</text>
        </g>
        <g transform="rotate(210)">
          <text x="-0.5em" y="-100">VII</text>
        </g>
        <g transform="rotate(240)">
          <text x="-0.5em" y="-100">VIII</text>
        </g>
        <g transform="rotate(270)">
          <text x="-0.5em" y="-100">IX</text>
        </g>
        <g transform="rotate(300)">
          <text x="-0.5em" y="-100">X</text>
        </g>
        <g transform="rotate(330)">
          <text x="-0.5em" y="-100">XI</text>
        </g>
        <g transform="rotate(360)">
          <text x="-0.5em" y="-100">XII</text>
        </g>
      </g>
    </svg>
  </center>
  <script>
    (function () {
      function set(hand, value, range) {
        var start = 360 * value / range - 90;
        hand.setAttribute('from', start);
        hand.setAttribute('to', start + 360);
      }

      function reset() {
        var h = document.getElementById('h');
        var m = document.getElementById('m');
        var s = document.getElementById('s');

        var now = new Date();
        var hh = now.getHours();
        var mm = now.getMinutes();
        var ss = now.getSeconds();
        set(h, hh + (mm / 60) + (ss / 3600), 12);
        set(m, mm + (ss / 60), 60);
        set(s, ss, 60);
      }
      reset();
    })();
  </script>
</div>
<div id="output"></div>
<div id="input"></div>
</body>
<script>
function meta(attr) {
  var element = document.createElement('meta');
  var head = document.head;
  for (var k in attr) {
    element.setAttribute(k, attr[k]);
  }
  head.insertBefore( element, head.firstChild );
}

function el(tag, attr, style) {
  var element = document.createElement(tag);
  for (var k in attr) {
    element.setAttribute(k, attr[k]);
  } 
  for (var k in style) {
    element.style[k] = style[k];
  } 
  return element;
}

document.title = document.location.pathname;
meta({"name":"viewport","content":"width=device-width,initial-scale=1,user-scalable=no"});
meta({"charset": "UTF-8"});
var canvas = document.getElementById('canvas');
var output = document.getElementById('output');
var input = document.getElementById('input');
var input_field = el('textarea', 
               {
                 "placeholder": "JavaScript expression"
               },
               {
                 "position": "absolute",
                 "width": "90%",
                 "height": "90%",
                 "left": "5%",
                 "right": "5%",
                 "top": "5%",
                 "fontFamily": "monospace",
                 "color": "#abc",
                 "background": "#123"
               });
input.appendChild(input_field);

function print(s) {
  var entry = el('pre', {}, 
               {
                 "fontFamily": "monospace",
                 "width": "80%",
                 "marginLeft": "15%",
                 "padding": "0.2em",
                 "borderRadius": "3px",
                 "color": "#123",
                 "background": "#abc"
               });
  entry.innerHTML = s;
  output.appendChild(entry);
  output.scrollTop = output.scrollHeight;
}

function echo(s) {
  var entry = el('pre', {}, 
               {
                 "fontFamily": "monospace",
                 "width": "80%",
                 "margin": "1rem",
                 "marginLeft": "5%",
                 "padding": "0.2em",
                 "borderRadius": "3px",
                 "color": "#abc",
                 "background": "#123"
               });
  entry.innerHTML = s;
  output.appendChild(entry);
  output.scrollTop = output.scrollHeight;
}

function run(s) {
  echo(s);
  var return_value = eval(s);
  if (return_value !== undefined) {
    print(return_value);
  }
}

input_field.onchange = function (e) {
  run(this.value);
  this.value = '';
}

function map(p) {
  var latlng = new google.maps.LatLng(
    p.coords.latitude, 
    p.coords.longitude);
  print(' latitude = ' +
    p.coords.latitude);
  print('longitude = ' + 
    p.coords.longitude);
  print(' accuracy = ' + 
    p.coords.accuracy + " m");
  setTimeout(function () {
    var map = new google.maps.Map(
      canvas, 
      {
        zoom: 16,
        center: latlng,
      });
    new google.maps.Marker({
       position: latlng, 
       map: map
    });
  }, 5000);
}

echo(map);
run('navigator\n  .geolocation\n  .getCurrentPosition(map)');
</script>
